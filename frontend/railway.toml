[build]
builder = "NIXPACKS"

[deploy]
startCommand = "npm run start"
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[env]
# Next.js configuration
NODE_ENV = { $default = "production" }
NEXT_PUBLIC_ENV = { $default = "production" }
PORT = { $default = "3000" }

# API endpoints (Railway internal URLs)
NEXT_PUBLIC_API_URL = { $default = "https://orchestrator-production.up.railway.app" }
NEXT_PUBLIC_WS_URL = { $default = "wss://orchestrator-production.up.railway.app" }

[networking]
serviceName = "frontend"